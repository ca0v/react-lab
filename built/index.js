var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();define("common/common",["require","exports","react"],function(t,e,o){"use strict";function n(t){return Object.keys(t).map(function(e){return o.createElement("li",{key:e},e,": ",t[e])})}function r(t){var e=t.state,n=Object.keys(e).map(function(n){var r=e[n],a={number:{type:"number",value:"valueAsNumber"},"boolean":{type:"checkbox",value:"checked"},string:{type:"text",value:"value"},undefined:{type:"text",value:"value"}},i=a[typeof r]||a.string;return o.createElement("div",null,o.createElement("label",{className:"input"},n),o.createElement("input",{key:n,type:i.type,value:r,checked:r,placeholder:n,onChange:function(e){t.setState((o={},o[n]=e.target[i.value],o));var o}}))});return o.createElement("div",null,n)}e.__esModule=!0,e.dump=n,e.debounce=function(t,e){void 0===e&&(e=200);var o;return function(){var n=function(){clearTimeout(o),t()};clearTimeout(o),o=setTimeout(n,e)}},e.input=r}),define("components/openlayers",["require","exports","react","common/common","openlayers"],function(t,e,o,n,r){"use strict";function a(t,e){var o=new r.layer.Vector({source:new r.source.Vector({url:e,format:new r.format.GeoJSON})});t.addLayer(o)}e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){return o.createElement("span",{className:"toolbar"},this.props.children)},e}(o.PureComponent),s=function(t){function e(e){var o=t.call(this,e)||this;return o.state={target:null},o}return __extends(e,t),e.prototype.render=function(){var t=this,e=this.state.map,n=function(){return o.createElement(i,null)};if(this.props.controls&&this.props.controls.draw){var r=this.props.controls.draw;n=function(){return o.createElement(i,null,r.point&&o.createElement("button",{className:""+("Point"===t.state.activeDrawingTool?"active":"inactive"),onClick:function(){return e&&t.draw("Point")}},"Point"),r.circle&&o.createElement("button",{className:""+("Circle"===t.state.activeDrawingTool?"active":"inactive"),onClick:function(){return e&&t.draw("Circle")}},"Circle"),r.line&&o.createElement("button",{className:""+("LineString"===t.state.activeDrawingTool?"active":"inactive"),onClick:function(){return e&&t.draw("LineString")}},"Line"),r.polygon&&o.createElement("button",{className:""+("Polygon"===t.state.activeDrawingTool?"active":"inactive"),onClick:function(){return e&&t.draw("Polygon")}},"Polygon"))}}return o.createElement("div",{className:"maplet"},this.props.title&&o.createElement("label",null,this.props.title),o.createElement("div",{className:"map "+(this.props.orientation||""),ref:function(e){return t.setState({target:e})}}),o.createElement(i,null,o.createElement(n,null)),this.props.children)},e.prototype.componentDidMount=function(){var t=this,e=new r.Map({view:new r.View({center:r.proj.fromLonLat(this.props.center),zoom:this.props.zoom}),controls:[],interactions:[]});if(this.props.allowPan!==!1&&(e.addInteraction(new r.interaction.DragPan),e.addInteraction(new r.interaction.KeyboardPan)),this.props.allowZoom!==!1&&(e.addInteraction(new r.interaction.MouseWheelZoom),e.addInteraction(new r.interaction.DragZoom)),e.on("moveend",n.debounce(function(){t.props.setCenter&&t.props.setCenter(r.proj.toLonLat(e.getView().getCenter()),e.getView().getZoom())},50)),this.props.bingImagerySet?e.addLayer(new r.layer.Tile({source:new r.source.BingMaps({key:"AuPHWkNxvxVAL_8Z4G8Pcq_eOKGm5eITH_cJMNAyYoIC1S_29_HhE893YrUUbIGl",imagerySet:this.props.bingImagerySet})})):this.props.osm!==!1&&e.addLayer(new r.layer.Tile({source:new r.source.OSM})),this.setState(function(t,o){return{map:e}}),this.props.layers&&this.props.layers.geoJson&&this.props.layers.geoJson.forEach(function(t){a(e,t)}),this.props.controls){if(this.props.controls.draw){var o=this.props.controls.draw;(o.point||o.circle||o.line||o.polygon)&&(o.polygon&&this.addDraw(e,"Polygon"),o.circle&&this.addDraw(e,"Circle"),o.line&&this.addDraw(e,"LineString"),o.point&&this.addDraw(e,"Point"))}this.props.controls.zoom?e.addControl(new r.control.Zoom({})):this.props.controls.zoomSlider&&e.addControl(new r.control.ZoomSlider({})),this.props.controls.fullScreen&&e.addControl(new r.control.FullScreen({})),this.props.controls.mousePosition&&e.addControl(new r.control.MousePosition({coordinateFormat:function(t){return t?t.map(function(t){return t.toFixed(4)}).join(","):""},projection:"EPSG:4326"})),this.props.controls.rotate&&e.addControl(new r.control.Rotate({})),this.props.controls.scaleLine&&e.addControl(new r.control.ScaleLine({})),this.props.controls.zoomToExtent&&e.addControl(new r.control.ZoomToExtent({}))}},e.prototype.draw=function(t){this.setState(function(e){return{activeDrawingTool:e.activeDrawingTool===t?null:t}})},e.prototype.activateDrawTool=function(t){var e=this;t.getInteractions().getArray().forEach(function(t){t instanceof r.interaction.Draw&&t.setActive(t.get("type")===e.state.activeDrawingTool)})},e.prototype.addDraw=function(t,e){var o=new r.source.Vector,n=new r.layer.Vector({source:o}),a=new r.interaction.Draw({source:o,type:e});a.set("type",e),a.setActive(!1),t.addInteraction(a),t.addLayer(n)},e.prototype.componentDidUpdate=function(t,e){var o=this.state.target,n=this.state.map;n&&(n.setTarget(o),n.getView().animate({center:r.proj.fromLonLat(this.props.center),zoom:this.props.zoom,duration:250}),this.activateDrawTool(n))},e.prototype.componentWillUnmount=function(){this.setState({target:null})},e}(o.PureComponent);e.OpenLayers=s}),define("components/index",["require","exports","react","components/openlayers","common/common"],function(t,e,o,n,r){"use strict";e.__esModule=!0;var a=function(t){function e(e){var o=t.call(this,e)||this;return e.drawPointTest=!0,o.state=o.props,o}return __extends(e,t),e.prototype.onMountMap=function(){},e.prototype.onMountLayerMap=function(){},e.prototype.render=function(){var t=this,e=function(e,o){t.setState({center:e,zoom:o})},a=this.state.portrait?"portrait":"landscape";return o.createElement("div",null,r.input(this),this.state.showmap&&o.createElement("div",null,o.createElement("div",null,o.createElement("label",null,this.state.center.map(function(t){return t.toFixed(5)}).join(",")," Z",this.state.zoom)),o.createElement(n.OpenLayers,{orientation:a,controls:{draw:{point:this.state.drawPointTest},zoom:!0,zoomToExtent:!0},setCenter:e,center:this.state.center,zoom:this.state.zoom,osm:!1}),o.createElement(n.OpenLayers,{orientation:a,controls:{mousePosition:!0,draw:{point:this.state.drawPointTest}},bingImagerySet:"AerialWithLabels",labels:!0,setCenter:e,center:this.state.center,zoom:this.state.zoom,layers:{geoJson:["http://openlayers.org/en/master/examples/data/geojson/countries.geojson"]}}),o.createElement(n.OpenLayers,{orientation:a,controls:{fullScreen:!0,draw:{point:this.state.drawPointTest}},bingImagerySet:"Aerial",labels:!0,setCenter:e,center:this.state.center,zoom:this.state.zoom,layers:{geoJson:["https://gist.githubusercontent.com/ca0v/78c82dbcb184d52f784a9aa11a452272/raw/5929e9469e02363665017202394aabba906845ae/trip.geojson"]}}),o.createElement(n.OpenLayers,{orientation:a,allowPan:!1,allowZoom:!1,controls:{scaleLine:!0,draw:{circle:!0,line:!0,point:!0,polygon:!0}},osm:!0,setCenter:e,center:this.state.center,zoom:this.state.zoom})))},e.prototype.toggleMap=function(){this.setState(function(t){return{showmap:!t.showmap}})},e}(o.PureComponent);e.ToggleMap=a}),define("app",["require","exports","react","components/index","common/common"],function(t,e,o,n,r){"use strict";e.__esModule=!0;var a=function(t){function e(e){var o=t.call(this,e)||this;return o.state={portrait:!0},o}return __extends(e,t),e.prototype.render=function(){return o.createElement("div",{className:"app"},o.createElement("title",null,"React + Openlayers Lab"),o.createElement(n.ToggleMap,{showmap:this.props.showmap,center:this.props.center,zoom:this.props.zoom,portrait:this.state.portrait}),r.input(this))},e}(o.PureComponent);e.App=a}),define("index",["require","exports","react","react-dom","app"],function(t,e,o,n,r){"use strict";function a(){n.render(o.createElement(r.App,{showmap:!0,center:[-82.408,34.789],zoom:12}),document.querySelector("app"))}return a});
//# sourceMappingURL=index.js.map